import{g as n,S as T,B as V}from"./base-section.js";import{S as q}from"./swiper-core.js";import{c as F,r as p,o as P,a as k}from"./vue.esm-bundler.js";import{u as D}from"./use-viewport-size.js";import{B as b,A as a,a as d}from"./animations.js";import{h as G}from"./analytics-data.js";import"./shopify.js";import"./rudderstack-client.js";import"./cookies.js";import"./validator.js";n.registerPlugin(T);const H={breakpoints:{768:{enabled:!1,slidesOffsetAfter:0,slidesOffsetBefore:0,spaceBetween:0}},centeredSlides:!0,centeredSlidesBounds:!0,slidesPerView:1.4,spaceBetween:10},Y=d.ELEMENT.HOVER.DELAY,O="category-row";class j extends V{constructor(){super(`[data-section-type="${O}"]`)}init(o){const r=o.container,u=this;this.setupInViewAnimation(o),F({name:"CategoryRowSection",setup(){const v=p(null),l=p(null),A=p([]),i=p([]),c={},_=p(!1),{isDesktop:w,isSmall:C,isTouch:N}=D();let f=null;const R=()=>{const e=r.querySelector(".swiper");e&&(v.value=new q(e,{...H,on:{slideChange:({activeIndex:t})=>{g(t)}}}))},g=e=>{var t,s;l.value!==null&&l.value!==e&&((t=i.value[l.value])==null||t.reverse()),(s=i.value[e])==null||s.play(),l.value=e},B=()=>{A.value.forEach((t,s)=>{if(!t)return;const E=t.querySelector(".category-row-item-hover-image"),I=t.querySelector(".category-row-item-title"),m=t.querySelector(".category-row-item-cta-buttons"),S=t.querySelector("[data-text-content]");if(!E||!I||!m||!S)return;n.set(E,{opacity:0}),n.set(m,{opacity:0}),n.set(S,{yPercent:30}),n.set(I,{opacity:0}),n.set(t,{borderRadius:b.DEFAULT});const h=n.timeline({defaults:{overwrite:"auto"},onComplete:()=>{m.querySelectorAll("a").forEach(y=>{y.style.pointerEvents="auto"})},onReverseComplete:()=>{m.querySelectorAll("a").forEach(y=>y.style.pointerEvents="none")},paused:!0});h.to(t,a.BORDER_RADIUS_PILL,0).to(E,a.FADE_IN_IMAGE,0).to(I,a.FADE_OUT_BORDER_OPACITY,0).to(S,a.MOVE_UP_IN_OUT,0).to(m,a.FADE_IN_CTA,0),i.value[s]=h});const e=r.querySelectorAll(".category-row-item-title");e.length&&n.to(e,{...a.STAGGERED_FADE_IN,onComplete:()=>{_.value=!0},scrollTrigger:{start:"top 75%",trigger:r}},0)},M=e=>{var t;l.value!==null&&l.value!==e&&((t=i.value[l.value])==null||t.reverse()),c[e]=setTimeout(()=>{const s=i.value[e];s&&(s.play(),l.value=e)},Y*1e3)},L=e=>{!N.value||w.value||C.value||!i.value[e]||l.value!==e&&g(e)},U=e=>{if(!_.value)return;c[e]&&(clearTimeout(c[e]),c[e]=null);const t=i.value[e];t&&(t.reverse(),l.value===e&&(l.value=null))};return P(()=>{R(),f=n.context(()=>{A.value=Array.from(r.querySelectorAll(".category-row-item")),B()},r),w.value||g(0),T.refresh(),u.isHomePageTemplate()&&G({sectionName:O})}),k(()=>{v.value&&v.value.destroy(),f==null||f.revert(),Object.values(c).forEach(e=>clearTimeout(e))}),{activeItem:l,categoryItems:A,handleClick:L,handleMouseEnter:M,handleMouseLeave:U}}}).mount(r)}onUnload(o){const r=o.container.__vue_app__;o.animation&&o.animation.scrollTrigger&&o.animation.scrollTrigger.kill(),o.animation&&(o.animation.kill(),o.animation=null),r&&r.unmount()}setupInViewAnimation(o){if(o.animation)o.animation.paused(!1),T.refresh();else{const r=this.setupAnimation(o,()=>this.setupInViewAnimationTimeline(o));r&&r.scrollTrigger&&(o.scrollTrigger=r.scrollTrigger)}}setupInViewAnimationTimeline(o){const r=o.container;if(!r)return null;const u=n.timeline({paused:!0,scrollTrigger:{...this.getInViewAnimationOptions(),start:"top 100%",trigger:r}});return u?(u.to(r,a.FADE_IN,d.SECTION.FADE_IN),u):null}}document.addEventListener("DOMContentLoaded",()=>{new j});
//# sourceMappingURL=category-row.js.map
