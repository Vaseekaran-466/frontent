import{e as P}from"./shopify.js";import{B as T,S as N,g as m}from"./base-section.js";import{S as E}from"./swiper-core.js";import{c as O,r as f,o as q}from"./vue.esm-bundler.js";import{u as L}from"./use-master-product-card.js";import{A as u}from"./animations.js";import{h as M}from"./analytics-data.js";import"./rudderstack-client.js";import"./cookies.js";import"./validator.js";import"./use-viewport-size.js";const V={breakpoints:{0:{slidesPerView:1.3},1024:{slidesPerView:3.6},768:{slidesPerView:2.6}},loop:!0,roundLengths:!0,slidesOffsetBefore:10,spaceBetween:10,updateOnWindowResize:!0},l="standard-product-carousel";class _ extends T{constructor(){super(`[data-section-type="${l}"]`)}init(r){const e=r.container,i=this;O({name:"StandardProductCarouselSection",setup(){const{cardRefs:w,setActiveColorway:S}=L(),o=f(null),n=f(null),g=()=>{o.value.slidePrev()},A=()=>{o.value.slideNext()},C=t=>{m.fromTo(t,{opacity:0},{...u.FADE_IN,duration:u.FADE_IN.duration*1.5})},d=async t=>{if(n.value&&o.value){const a=e.querySelector(`[data-${l}-block-id="${n.value}"]`);if(a){const y=a.querySelector(".swiper-wrapper"),v=e.querySelector(".swiper .swiper-wrapper").querySelectorAll(".swiper-slide");Array.from(v).forEach(I=>{y.appendChild(I)})}}n.value=t;const s=e.querySelector(`[data-${l}-block-id="${t}"]`);if(!s)return;const h=s.querySelectorAll(".swiper-slide");o.value&&o.value.destroy();const p=e.querySelector(".swiper"),c=p.querySelector(".swiper-wrapper");c.innerHTML="",Array.from(h).forEach(a=>{c.appendChild(a)}),o.value=new E(p,V),C(c)};return q(async()=>{const t=e.getAttribute("data-initial-product-group-id");try{t&&await d(t)}catch(s){P("[Allbirds section] - Standard Product Carousel - Error initializing carousel:",{},s)}i.isHomePageTemplate()&&M({sectionName:l})}),{activeProductGroup:n,cardRefs:w,handleCarouselNext:A,handleCarouselPrevious:g,handleProductGroupSwitch:d,setActiveColorway:S}}}).mount(e)}setupInViewAnimation(r){if(r.animation)r.animation.paused(!1),N.refresh();else{const e=this.setupAnimation(r,()=>this.setupInViewAnimationTimeline(r));e&&e.scrollTrigger&&(r.scrollTrigger=e.scrollTrigger)}}setupInViewAnimationTimeline(r){const e=r.container;if(!e)return null;const i=m.timeline({paused:!0,scrollTrigger:{...this.getInViewAnimationOptions(),start:"top 100%",trigger:e}});return i?(i.fromTo(e,{opacity:0},u.FADE_IN,0),i):null}}document.addEventListener("DOMContentLoaded",()=>{new _});
//# sourceMappingURL=standard-product-carousel.js.map
